<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>

  <script data-ionic="inject">
    (function (w) { var i = w.Ionic = w.Ionic || {}; i.version = '3.9.2'; i.angular = '5.2.10'; i.staticDir = 'build/'; })(window);
  </script>
  <meta charset="UTF-8">
  <title>Duerme ya!</title>
  <meta name="viewport" content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="format-detection" content="telephone=no">
  <meta name="msapplication-tap-highlight" content="no">

  <link rel="icon" type="image/x-icon" href="assets/icon/favicon.ico">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#4e8ef7">

  <!-- add to homescreen for ios -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <!-- cordova.js required for cordova apps (remove if not needed) -->
  <script src="cordova.js"></script>

  <!-- un-comment this code to enable service worker
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js')
        .then(() => console.log('service worker installed'))
        .catch(err => console.error('Error', err));
    }
  </script>-->

  <link href="build/main.css" rel="stylesheet">
  <script>
    $(document).ready(function () {
      $('#ad').fadeOut(1);
      $('.back').click(function () {
        $('#start').show();
        $('#results').hide();
        $('#resultsNow').hide();
      });

      $('#calculate').click(function () {
        if ($('#hour').val() != '(hour)' && $('#minute').val() != '(minute)') {
          $('#start').hide();
          var setTime = new Date();

          if ($('#hour').val() == 12) {
            $('#hour').val(0);
          }

          if ($('#ampm').val() == "AM") {
            setTime.setHours($('#hour').val());
          }
          else if ($('#ampm').val() == "PM") {
            setTime.setHours(+$('#hour').val() + 12);
          }

          setTime.setMinutes($('#minute').val());

          var res1 = new Date(setTime.getTime() - 270 * 60000);
          var res2 = new Date(res1.getTime() - 90 * 60000);
          var res3 = new Date(res2.getTime() - 90 * 60000);
          var res4 = new Date(res3.getTime() - 90 * 60000);

          function retDate(dateObj) {
            var formatted = '';
            var pm = false;
            if (dateObj.getHours() > 12) {
              formatted = dateObj.getHours() - 12;
              pm = true;
            } else if (dateObj.getHours() < 12 && dateObj.getHours() != 0) {
              formatted = dateObj.getHours();
            } else if (dateObj.getHours() == 0) {
              formatted = "12";
            } else if (dateObj.getHours() == 12) {
              formatted = "12";
              pm = true;
            }
            if (dateObj.getMinutes() < 10) {
              formatted = formatted + ":0" + dateObj.getMinutes();
            } else {
              formatted = formatted + ":" + dateObj.getMinutes();
            }
            if (pm == true) {
              formatted = formatted + " PM";
            } else {
              formatted = formatted + " AM";
            }
            return formatted;
          }

          $('#result4').html(String(retDate(res1)));
          $('#result3').html(String(retDate(res2)));
          $('#result2').html(String(retDate(res3)));
          $('#result1').html(String(retDate(res4)));

          $('#results').fadeIn();
          $('#feedback').fadeIn();
          $('#ad').fadeIn();
        } // end hour/minute check if
        else {
          alert("Please select an hour and a minute before trying to calculate!");
        } // end not-filled check
      }); // end calculate

      $('#zzz').click(function () {
        $('#start').hide();
        var zDate = new Date();

        var res1 = new Date(zDate.getTime() + 104 * 60000);
        var res2 = new Date(res1.getTime() + 90 * 60000);
        var res3 = new Date(res2.getTime() + 90 * 60000);
        var res4 = new Date(res3.getTime() + 90 * 60000);
        var res5 = new Date(res4.getTime() + 90 * 60000);
        var res6 = new Date(res5.getTime() + 90 * 60000);

        function retDate(dateObj) {
          var formatted = '';
          var pm = false;
          if (dateObj.getHours() > 12) {
            formatted = dateObj.getHours() - 12;
            pm = true;
          } else if (dateObj.getHours() < 12 && dateObj.getHours() != 0) {
            formatted = dateObj.getHours();
          } else if (dateObj.getHours() == 0) {
            formatted = "12";
          } else if (dateObj.getHours() == 12) {
            formatted = "12";
            pm = true;
          }
          if (dateObj.getMinutes() < 10) {
            formatted = formatted + ":0" + dateObj.getMinutes();
          } else {
            formatted = formatted + ":" + dateObj.getMinutes();
          }
          if (pm == true) {
            formatted = formatted + " PM";
          } else {
            formatted = formatted + " AM";
          }
          return formatted;
        }

        $('#resultNow1').html(String(retDate(res1)));
        $('#resultNow2').html(String(retDate(res2)));
        $('#resultNow3').html(String(retDate(res3)));
        $('#resultNow4').html(String(retDate(res4)));
        $('#resultNow5').html(String(retDate(res5)));
        $('#resultNow6').html(String(retDate(res6)));

        $('#resultsNow').fadeIn();
        $('#feedback').fadeIn();
        $('#ad').fadeIn();
      });
    });
  </script> 
</head>

<body>

  <!-- Ionic's root component and where the app will load -->
  <ion-app></ion-app>

  <!-- The polyfills js is generated during the build process -->
  <script src="build/polyfills.js"></script>

  <!-- The vendor js is generated during the build process
       It contains all of the dependencies in node_modules -->
  <script src="build/vendor.js"></script>

  <!-- The main bundle js is generated during the build process -->
  <script src="build/main.js"></script>

</body>

</html>